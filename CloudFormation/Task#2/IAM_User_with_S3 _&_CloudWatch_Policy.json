{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Create an IAM User with S3 and CloudWatch policies using CloudFormation",

     "Parameters": {

        "Username": {
            "Description": "Name of the IAM User being Created",
            "Type": "String",
            "Default": "DemoUser"
        },

        "Password": {
            "Description": "Password of the IAM User being Created",
            "Type": "String",
            "Default": "abcd"
        }
},

 "Resources": {    

"IAMUser" : {
  "Type" : "AWS::IAM::User",
  "Properties" : {
      
      "LoginProfile" : {
  "Password" : {"Ref" : "Password"},
  "PasswordResetRequired" : "false"
},
      
      "UserName" :{"Ref" : "Username"}
    }
    
},

   "S3ReadOnlyInlinePolicy" : {
  "Type" : "AWS::IAM::Policy",
  "Properties" : {
      
      "PolicyDocument" : {
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:Get*",
                "s3:List*"
            ],
            "Resource": "*"
        }
    ]
},
      "PolicyName" : "S3ReadOnlyPolicy",
      
      "Users" : [ {"Ref" : "IAMUser"} ]
    }
},

 "CloudWatchReadOnlyInlinePolicy" : {
  "Type" : "AWS::IAM::Policy",
  "Properties" : {
      
      "PolicyDocument" : {
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": [
                "autoscaling:Describe*",
                "cloudwatch:Describe*",
                "cloudwatch:Get*",
                "cloudwatch:List*",
                "logs:Get*",
                "logs:List*",
                "logs:Describe*",
                "logs:TestMetricFilter",
                "logs:FilterLogEvents",
                "sns:Get*",
                "sns:List*"
            ],
            "Effect": "Allow",
            "Resource": "*"
        }
    ]
},
      "PolicyName" : "CloudWatchReadOnlyPolicy",
      
      "Users" : [ {"Ref" : "IAMUser"} ]
    }
}


}




}